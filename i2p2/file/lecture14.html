<!DOCTYPE HTML>
<html lang="zh-TW" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Lecture 12: File Processing (2) - Introduction to Programming (II)</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="程式設計(二)教材">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../favicon.svg">
                        <link rel="shortcut icon" href="../favicon.png">
                <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
                <link rel="stylesheet" href="../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
                <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../intro.html"><strong aria-hidden="true">1.</strong> Course Introduction</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> VS Code Tutorial</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../vscode_tutorial/lab_1_vscode_315.html"><strong aria-hidden="true">2.1.</strong> VS Code Tutorial (315 classroom)</a></li><li class="chapter-item expanded "><a href="../vscode_tutorial/lab_1_vscode.html"><strong aria-hidden="true">2.2.</strong> VS Code Tutorial (Linux/macOS/code server)</a></li><li class="chapter-item expanded "><a href="../vscode_tutorial/lab_1_vscode_win.html"><strong aria-hidden="true">2.3.</strong> VS Code Tutorial (WSL/windows + mingw)</a></li></ol></li><li class="chapter-item expanded "><a href="../class/lecture1.html"><strong aria-hidden="true">3.</strong> Lecture 1: Sturcture and Class</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../class/lab/lab1.html"><strong aria-hidden="true">3.1.</strong> Lab 1: Hello Class</a></li></ol></li><li class="chapter-item expanded "><a href="../class/lecture2.html"><strong aria-hidden="true">4.</strong> Lecture 2: Class Design 101</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../class/lecture2_ex1.html"><strong aria-hidden="true">4.1.</strong> Example 1: Triangle</a></li><li class="chapter-item expanded "><a href="../class/lecture2_ex2.html"><strong aria-hidden="true">4.2.</strong> Example 2: Vector</a></li></ol></li><li class="chapter-item expanded "><a href="../class/lecture3.html"><strong aria-hidden="true">5.</strong> Lecture 3: Class Data Members &amp; Member Functions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../class/lecture3_ex1.html"><strong aria-hidden="true">5.1.</strong> Example 1: Triangle (again)</a></li><li class="chapter-item expanded "><a href="../class/lecture3_ex2.html"><strong aria-hidden="true">5.2.</strong> Example 2: Vector (again)</a></li><li class="chapter-item expanded "><a href="../class/lecture3_ex3.html"><strong aria-hidden="true">5.3.</strong> Example 3: Integer Calculator</a></li></ol></li><li class="chapter-item expanded "><a href="../class/lecture4.html"><strong aria-hidden="true">6.</strong> Lecture 4: Class Constructor &amp; Modifer</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../class/lecture4_ex1.html"><strong aria-hidden="true">6.1.</strong> Example 1: Triangle (again)</a></li><li class="chapter-item expanded "><a href="../class/lecture4_ex2.html"><strong aria-hidden="true">6.2.</strong> Example 2: Vector (again)</a></li><li class="chapter-item expanded "><a href="../class/lecture4_ex3.html"><strong aria-hidden="true">6.3.</strong> Example 3: Integer Calculator (again)</a></li><li class="chapter-item expanded "><a href="../class/lab/lab4-1.html"><strong aria-hidden="true">6.4.</strong> Lab 4-1: Complex Numbers (50%)</a></li><li class="chapter-item expanded "><a href="../class/lab/lab4-2.html"><strong aria-hidden="true">6.5.</strong> Lab 4-2: Complex Number Calculation (35%)</a></li><li class="chapter-item expanded "><a href="../class/lab/lab4-3.html"><strong aria-hidden="true">6.6.</strong> Lab 4-3: Advance Complex Number Calculation (15%)</a></li></ol></li><li class="chapter-item expanded "><a href="../class/lecture5.html"><strong aria-hidden="true">7.</strong> Lecture 5: Collaborate with Other Classes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../class/lecture5_ex1.html"><strong aria-hidden="true">7.1.</strong> Example 1: Triangle (again)</a></li><li class="chapter-item expanded "><a href="../class/lecture5_ex2.html"><strong aria-hidden="true">7.2.</strong> Example 2: Vector (again)</a></li><li class="chapter-item expanded "><a href="../class/lecture5_ex3.html"><strong aria-hidden="true">7.3.</strong> Example 3: Fixed Point Number &amp; Fixed Point Number Calculator</a></li></ol></li><li class="chapter-item expanded "><a href="../class/lecture6.html"><strong aria-hidden="true">8.</strong> Lecture 6: Operator &amp; Operator Overloading</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../class/lecture6_ex1.html"><strong aria-hidden="true">8.1.</strong> Example 1: Triangle (again)</a></li><li class="chapter-item expanded "><a href="../class/lecture6_ex2.html"><strong aria-hidden="true">8.2.</strong> Example 2: Vector (again)</a></li><li class="chapter-item expanded "><a href="../class/lecture6_ex3.html"><strong aria-hidden="true">8.3.</strong> Example 3: Fixed Point Number &amp; Fixed Point Number Calculator (again)</a></li><li class="chapter-item expanded "><a href="../class/lab/lab6-1.html"><strong aria-hidden="true">8.4.</strong> Lab 6-1: Enhanced Complex Numbers (40%)</a></li><li class="chapter-item expanded "><a href="../class/lab/lab6-2.html"><strong aria-hidden="true">8.5.</strong> Lab 6-2: Simple Complex Number Calculator (40%)</a></li><li class="chapter-item expanded "><a href="../class/lab/lab6-3.html"><strong aria-hidden="true">8.6.</strong> Lab 6-3: Enhanced Complex Number Calculator (20%)</a></li></ol></li><li class="chapter-item expanded "><a href="../oop/lecture7.html"><strong aria-hidden="true">9.</strong> Lecture 7: Introduction to Object Oriented Programming &amp; Design</a></li><li class="chapter-item expanded "><a href="../oop/lecture8.html"><strong aria-hidden="true">10.</strong> Lecture 8: OOP: Inheritance (1)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../oop/lecture8_ex1.html"><strong aria-hidden="true">10.1.</strong> Example 1: Integer &amp; Real</a></li><li class="chapter-item expanded "><a href="../oop/lecture8_ex2.html"><strong aria-hidden="true">10.2.</strong> Example 2: Complex Number</a></li><li class="chapter-item expanded "><a href="../oop/lecture8_ex3.html"><strong aria-hidden="true">10.3.</strong> Example 3: Integer &amp; Real &amp; Complex Number</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.</strong> Midterm Project: Big Positive Real Number Calculator</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../midterm-1.html"><strong aria-hidden="true">11.1.</strong> Midterm-1: Big Positive Real Number in Decimal Point Format</a></li><li class="chapter-item expanded "><a href="../midterm-2.html"><strong aria-hidden="true">11.2.</strong> Midterm-2: Simple Big Positive Real Number Calculator</a></li><li class="chapter-item expanded "><a href="../midterm-3.html"><strong aria-hidden="true">11.3.</strong> Midterm-3: Enhanced Big Positive Real Number Calculator</a></li></ol></li><li class="chapter-item expanded "><a href="../oop/lecture10.html"><strong aria-hidden="true">12.</strong> Lecture 10: OOP: Inheritance (2)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../oop/lecture10_ex1.html"><strong aria-hidden="true">12.1.</strong> Example 1: Integer &amp; Real &amp; Complex Number Calculator</a></li><li class="chapter-item expanded "><a href="../oop/lecture10_ex2.html"><strong aria-hidden="true">12.2.</strong> Example 2: Complex Number &amp; Triangle</a></li><li class="chapter-item expanded "><a href="../oop/lecture10_ex3.html"><strong aria-hidden="true">12.3.</strong> Example 3: Complex Number &amp; Triangles</a></li></ol></li><li class="chapter-item expanded "><a href="../oop/lecture11.html"><strong aria-hidden="true">13.</strong> Lecture 11: OOP: Polymorphism (1)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../oop/lecture11_ex1.html"><strong aria-hidden="true">13.1.</strong> Example 1: Integer &amp; Real</a></li><li class="chapter-item expanded "><a href="../oop/lecture11_ex2.html"><strong aria-hidden="true">13.2.</strong> Example 2: Complex Number</a></li><li class="chapter-item expanded "><a href="../oop/lecture11_ex3.html"><strong aria-hidden="true">13.3.</strong> Example 3: Integer &amp; Real &amp; Complex Number</a></li></ol></li><li class="chapter-item expanded "><a href="../oop/lecture12.html"><strong aria-hidden="true">14.</strong> Lecture 12: OOP: Polymorphism (2)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../oop/lecture12_ex1.html"><strong aria-hidden="true">14.1.</strong> Example 1: Integer &amp; Real &amp; Complex Number Calculator</a></li><li class="chapter-item expanded "><a href="../oop/lecture12_ex2.html"><strong aria-hidden="true">14.2.</strong> Example 2: Complex Number &amp; Triangles</a></li><li class="chapter-item expanded "><a href="../oop/lab/lab12-1.html"><strong aria-hidden="true">14.3.</strong> Lab 12-1: Complex Number's Geometry (40%)</a></li><li class="chapter-item expanded "><a href="../oop/lab/lab12-2.html"><strong aria-hidden="true">14.4.</strong> Lab 12-2: Simple Complex Number Geometry Transformation (40%)</a></li><li class="chapter-item expanded "><a href="../oop/lab/lab12-3.html"><strong aria-hidden="true">14.5.</strong> Lab 12-3: Enhanced Complex Number Geometry Transformation (20%)</a></li></ol></li><li class="chapter-item expanded "><a href="../file/lecture13.html"><strong aria-hidden="true">15.</strong> Lecture 13: File Processing (1)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../file/lecture13_ex1.html"><strong aria-hidden="true">15.1.</strong> Example 1: Big Real Number in Text File</a></li><li class="chapter-item expanded "><a href="../file/lecture13_ex2.html"><strong aria-hidden="true">15.2.</strong> Example 2: Point &amp; Triangle in Text File (function ver.)</a></li><li class="chapter-item expanded "><a href="../file/lecture13_ex3.html"><strong aria-hidden="true">15.3.</strong> Example 3: Vector &amp; Matrix in Binary File (function ver.)</a></li></ol></li><li class="chapter-item expanded "><a href="../file/lecture14.html" class="active"><strong aria-hidden="true">16.</strong> Lecture 12: File Processing (2)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../file/lecture14_ex1.html"><strong aria-hidden="true">16.1.</strong> Example 1: Point &amp; Triangle in Text File (class ver.)</a></li><li class="chapter-item expanded "><a href="../file/lecture14_ex2.html"><strong aria-hidden="true">16.2.</strong> Example 2: Vector &amp; Matrix in Binary File (class ver.)</a></li><li class="chapter-item expanded "><a href="../file/lab/lab14-1.html"><strong aria-hidden="true">16.3.</strong> Lab 14-1: Simple Complex Number Geometry Transformation (Text File ver.) (75%)</a></li><li class="chapter-item expanded "><a href="../file/lab/lab14-2.html"><strong aria-hidden="true">16.4.</strong> Lab 14-2: Simple Complex Number Geometry Transformation (Binary File ver.) (25%)</a></li></ol></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">Introduction to Programming (II)</h1>

                    <div class="right-buttons">
                                                <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                                                <a href="https://github.com/stevenokm/i2p-nthu-math/edit/main/i2p2/src/file/lecture14.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>
                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!---
marp: true
author: Yi-Wen Hung
theme: default
headingDivider: 2
paginate: true
--->
<h1 id="file-processing-2"><a class="header" href="#file-processing-2">File Processing (2)</a></h1>
<blockquote>
<p>Slides version: <a href="./lecture14_slides.html">lecture14_slides.html</a>
Website version: <a href="./lecture14.html">lecture14.html</a></p>
</blockquote>
<ul>
<li>Recap: File in C++
<ul>
<li>Open &amp; Close File</li>
<li>Read or Write or Read &amp; Write</li>
<li>Text or Binary</li>
<li>Append or Overwrite</li>
<li>Sequantial or Random Access</li>
</ul>
</li>
</ul>
<ul>
<li>Detail in <code>iostream</code> &amp; <code>fstream</code>
<ul>
<li>Stream I/O &amp; Buffer</li>
<li>Stream Operator &amp; Manipulator</li>
<li>Stream Status &amp; Error Handling (More details in lecture 15)</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>File I/O &amp; <code>class</code>
<ul>
<li>File I/O function in a <code>class</code></li>
</ul>
</li>
<li>File I/O for Structured Data
<ul>
<li>Class or Function?</li>
<li>Text or Binary File?</li>
<li>Sequential or Random Access?</li>
</ul>
</li>
<li>Example 1: Point &amp; Triangle in Text File (class ver.)</li>
<li>Example 2: Vector &amp; Matrix in Binary File (class ver.)</li>
<li>Lab 14: File Export of Complex Number's Geometry</li>
</ul>
<h2 id="recap-file-in-c"><a class="header" href="#recap-file-in-c">Recap: File in C++</a></h2>
<hr />
<h3 id="example-gradebook-text"><a class="header" href="#example-gradebook-text">Example: Gradebook (Text)</a></h3>
<p>In text format (csv):</p>
<pre><code class="language-csv">Name,Grade
John,A
Mary,B
</code></pre>
<p>In table format:</p>
<table><thead><tr><th align="center">Name</th><th align="center">Grade</th></tr></thead><tbody>
<tr><td align="center">John</td><td align="center">A</td></tr>
<tr><td align="center">Mary</td><td align="center">B</td></tr>
</tbody></table>
<hr />
<h3 id="example-image-binary"><a class="header" href="#example-image-binary">Example: Image (Binary)</a></h3>
<p>In viewable format: as the image on the right</p>
<p><img src="img/nthu.jpg" alt="bg right fit" /></p>
<p>In binary format:</p>
<pre><code class="language-binary">00000000: ffd8 ffe1 4812 4578 6966 0000 4d4d 002a  ....H.Exif..MM.*
00000010: 0000 0008 0007 0112 0003 0000 0001 0001  ................
00000020: 0000 011a 0005 0000 0001 0000 0062 011b  .............b..
00000030: 0005 0000 0001 0000 006a 0128 0003 0000  .........j.(....
00000040: 0001 0002 0000 0131 0002 0000 001c 0000  .......1........
00000050: 0072 0132 0002 0000 0014 0000 008e 8769  .r.2...........i
00000060: 0004 0000 0001 0000 00a4 0000 00d0 002d  ...............-
00000070: c6c0 0000 2710 002d c6c0 0000 2710 4164  ....'..-....'.Ad
00000080: 6f62 6520 5068 6f74 6f73 686f 7020 4353  obe Photoshop CS
00000090: 3520 5769 6e64 6f77 7300 3230 3133 3a30  5 Windows.2013:0
000000a0: 343a 3031 2031 353a 3033 3a30 3400 0000  4:01 15:03:04...
000000b0: 0003 a001 0003 0000 0001 0001 0000 a002  ................
</code></pre>
<hr />
<h3 id="process-a-file"><a class="header" href="#process-a-file">Process a File</a></h3>
<ul>
<li>Open &amp; Close File
<ul>
<li>constructor or <code>.open()</code></li>
</ul>
</li>
<li>Read or Write or Read &amp; Write
<ul>
<li><code>ifstream</code> and <code>ofstream</code></li>
<li><code>ios::in</code> and <code>ios::out</code> in <code>mode</code> argument of <code>fstream</code></li>
</ul>
</li>
<li>Text or Binary
<ul>
<li><code>ios::binary</code> in <code>mode</code> argument</li>
</ul>
</li>
<li>Append or Overwrite
<ul>
<li><code>ios::app</code> and <code>ios::trunc</code> in <code>mode</code> argument</li>
</ul>
</li>
<li>Sequantial or Random Access
<ul>
<li><code>.seekp()</code> and <code>.tellp()</code> for set/get position of <code>&lt;&lt;</code></li>
<li><code>.seekg()</code> and <code>.tellg()</code> for set/get position of <code>&gt;&gt;</code> or <code>getline()</code></li>
</ul>
</li>
</ul>
<hr />
<h3 id="mode-and-file-handeling"><a class="header" href="#mode-and-file-handeling"><code>mode</code> and file handeling</a></h3>
<p>Ref: <a href="https://en.cppreference.com/w/cpp/io/basic_filebuf/open">std::basic_filebuf&lt;CharT,Traits&gt;::open - cppreference.com</a></p>
<table><thead><tr><th align="center"><code>mode</code></th><th align="center">Action if file exists</th><th align="center">Action if file does not exist</th></tr></thead><tbody>
<tr><td align="center"><code>in</code></td><td align="center">Read from start</td><td align="center">Error</td></tr>
<tr><td align="center"><code>out</code>, <code>out\|trunc</code></td><td align="center">Destory contents</td><td align="center">Create new</td></tr>
<tr><td align="center"><code>app</code>, <code>out\|app</code></td><td align="center">Write to end</td><td align="center">Create new</td></tr>
<tr><td align="center"><code>out\|in</code></td><td align="center">Read from start</td><td align="center">Error</td></tr>
<tr><td align="center"><code>out\|in\|trunc</code></td><td align="center">Destory contents</td><td align="center">Create new</td></tr>
<tr><td align="center"><code>out\|in\|app</code>, <code>in\|app</code></td><td align="center">Write to end</td><td align="center">Create new</td></tr>
<tr><td align="center"><code>binray\|in</code></td><td align="center">Read from start</td><td align="center">Error</td></tr>
<tr><td align="center"><code>binray\|out</code>, <code>binray\|out\|trunc</code></td><td align="center">Destory contents</td><td align="center">Create new</td></tr>
<tr><td align="center"><code>binray\|app</code>, <code>binray\|out\|app</code></td><td align="center">Write to end</td><td align="center">Create new</td></tr>
<tr><td align="center"><code>binray\|out\|in</code></td><td align="center">Read from start</td><td align="center">Error</td></tr>
<tr><td align="center"><code>binray\|out\|in\|trunc</code></td><td align="center">Destory contents</td><td align="center">Create new</td></tr>
<tr><td align="center"><code>binray\|out\|in\|app</code>, <code>binray\|in\|app</code></td><td align="center">Write to end</td><td align="center">Create new</td></tr>
</tbody></table>
<h2 id="detail-in-iostream--fstream"><a class="header" href="#detail-in-iostream--fstream">Detail in <code>iostream</code> &amp; <code>fstream</code></a></h2>
<p>Inheritance diagram: (Ref: <a href="https://www.geeksforgeeks.org/file-handling-c-classes/">File Handling through C++ Classes</a>)</p>
<p><img src="img/CPP-File-Handling.png" alt="" /></p>
<hr />
<p>Some <code>istream</code> and <code>ostream</code> functions can be used in thier derived classes:</p>
<ul>
<li><code>&lt;&lt;</code> from <code>ostream</code> and <code>&gt;&gt;</code> from <code>istream</code> can be used in <code>fstream</code> and <code>stringstream</code></li>
<li><code>put()</code> from <code>ostream</code>, <code>get()</code> and <code>getline()</code> from <code>istream</code> can be used in <code>fstream</code> and <code>stringstream</code></li>
<li>Manupulators, such as <code>std::fixed</code>, <code>std::setprecision()</code> can be used in <code>fstream</code> and <code>stringstream</code></li>
</ul>
<p>Details will be discussed in lecture 15.</p>
<hr />
<h3 id="stream-io--buffer"><a class="header" href="#stream-io--buffer">Stream I/O &amp; Buffer</a></h3>
<p>Ref: <a href="https://www.geeksforgeeks.org/basic-input-output-c/">Basic Input / Output in C++</a></p>
<p>C++ comes with libraries that provide for performing input and output.</p>
<blockquote>
<ul>
<li>Input Stream: The information is from the device (for example, Keyboard) to the main memory</li>
<li>Output Stream: The information is from main memory to device (display screen)</li>
</ul>
</blockquote>
<p><img src="img/C-basic-input-output.png" alt="bg right fit" /></p>
<hr />
<h4 id="what-is-a-buffer"><a class="header" href="#what-is-a-buffer">What is a buffer?</a></h4>
<p>Ref: <a href="https://www.geeksforgeeks.org/clearing-the-input-buffer-in-cc/">Clearing The Input Buffer In C/C++</a></p>
<blockquote>
<p>A temporary storage area is called a buffer.
All standard input and output devices contain an input and output buffer.
In standard C/C++, streams are buffered, for example in the case of standard input, when we press the key on the keyboard, it isn’t sent to your program, rather it is buffered by the operating system till the time is allotted to that program.</p>
</blockquote>
<hr />
<p>Example:</p>
<pre><code class="language-cpp">// C++ Code to explain why
// not clearing the input
// buffer causes undesired
// outputs
#include &lt;iostream&gt;
#include &lt;vector&gt;
using namespace std;

int main()
{
    int a;
    char ch[80];

    // Enter input from user
    // - 4 for example
    cin &gt;&gt; a;

    // Get input from user -
    // &quot;GeeksforGeeks&quot; for example
    cin.getline(ch, 80);

    // Prints 4
    cout &lt;&lt; a &lt;&lt; endl;

    // Printing string : This does
    // not print string
    cout &lt;&lt; ch &lt;&lt; endl;

    return 0;
}
</code></pre>
<hr />
<p>Console:</p>
<pre><code class="language-console">$ ./a.out
4
GeeksforGeeks
4

$
</code></pre>
<p>Why? because the '\n' character is typed into the buffer and is not removed.</p>
<ul>
<li>When the user presses the <kbd>Enter</kbd> key, the '\n' character sends to the buffer.</li>
</ul>
<hr />
<h4 id="how-to-clear-the-buffer"><a class="header" href="#how-to-clear-the-buffer">How to clear the buffer?</a></h4>
<ol>
<li>Using <code>cin.ignore(numeric_limits::max(),’\n’);</code></li>
</ol>
<pre><code class="language-cpp">// C++ Code to explain how
// &quot;cin.ignore(numeric_limits
// &lt;streamsize&gt;::max(),'\n');&quot;
// discards the input buffer
#include &lt;iostream&gt;
// for &lt;streamsize&gt;
#include &lt;ios&gt;
// for numeric_limits
#include &lt;limits&gt;
using namespace std;
int main()
{
    int a;
    char str[80];
    // Enter input from user
    // - 4 for example
    cin &gt;&gt; a;
    // discards the input buffer
    cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\n');
    // Get input from user -
    // GeeksforGeeks for example
    cin.getline(str, 80);
    // Prints 4
    cout &lt;&lt; a &lt;&lt; endl;
    // Printing string : This
    // will print string now
    cout &lt;&lt; str &lt;&lt; endl;
    return 0;
}
</code></pre>
<hr />
<ol start="2">
<li>Using <code>cin.sync()</code></li>
</ol>
<pre><code class="language-cpp">// C++ Code to explain how &quot; cin.sync();&quot;
// discards the input buffer
#include &lt;iostream&gt;
#include &lt;ios&gt;
#include &lt;limits&gt;
using namespace std;
int main()
{
    int a;
    char str[80];
    // Enter input from user
    // - 4 for example
    cin &gt;&gt; a;
    // Discards the input buffer
    cin.sync();
    // Get input from user -
    // GeeksforGeeks for example
    cin.getline(str, 80);
    // Prints 4
    cout &lt;&lt; a &lt;&lt; endl;
    // Printing string - this
    // will print string now
    cout &lt;&lt; str &lt;&lt; endl;
    return 0;
}
</code></pre>
<hr />
<ol start="3">
<li>Using <code>cin &gt;&gt; ws</code></li>
</ol>
<pre><code class="language-cpp">// C++ Code to explain how &quot;cin &gt;&gt; ws&quot;
// discards the input buffer along with
// initial white spaces of string
#include &lt;iostream&gt;
#include &lt;vector&gt;
using namespace std;
int main()
{
    int a;
    string s;
    // Enter input from user -
    // 4 for example
    cin &gt;&gt; a;
    // Discards the input buffer and
    // initial white spaces of string
    cin &gt;&gt; ws;
    // Get input from user -
    // GeeksforGeeks for example
    getline(cin, s);
    // Prints 4 and GeeksforGeeks :
    // will execute print a and s
    cout &lt;&lt; a &lt;&lt; endl;
    cout &lt;&lt; s &lt;&lt; endl;
    return 0;
}
</code></pre>
<hr />
<h3 id="stream-operator--manipulator"><a class="header" href="#stream-operator--manipulator">Stream Operator &amp; Manipulator</a></h3>
<h4 id="stream-operator"><a class="header" href="#stream-operator"><code>&lt;&lt;</code> &amp; <code>&gt;&gt;</code> stream operator</a></h4>
<p><a href="https://www.geeksforgeeks.org/overloading-stream-insertion-operators-c/">Overloading stream insertion (&lt;&gt;) operators in C++</a></p>
<blockquote>
<ul>
<li>Why these operators must be overloaded as global?
In operator overloading, if an operator is overloaded as a member, then it must be a member of the object on the <em>left side</em> of the operator.
For example, <code>ob1 + ob2</code>. To make this statement compile, we must overload <code>+</code> in a class of <code>ob1</code> or make <code>+</code> a global function.
The operators <code>&lt;&lt;</code> and <code>&gt;&gt;</code> are called like <code>cout &lt;&lt; ob1</code> and <code>cin &gt;&gt; ob1</code>.
So if we want to make them a member method, then they must be made members of ostream and istream classes, which is not a good option most of the time.
Therefore, these operators are overloaded as global functions with two parameters, cout and object of user-defined class.</li>
</ul>
</blockquote>
<hr />
<h4 id="stream-manipulator-more-detailed-in-lecture-15"><a class="header" href="#stream-manipulator-more-detailed-in-lecture-15">Stream Manipulator (More detailed in lecture 15)</a></h4>
<p>Ref: <a href="https://www.geeksforgeeks.org/manipulators-in-c-with-examples/">Manipulators in C++ with Examples</a></p>
<p>There are two types of manipulators in C++:</p>
<ol>
<li>Manipulators without arguments:
<ul>
<li>endl: Defined in ostream. It is used to enter a new line and after entering a new line it flushes the output stream.</li>
<li>ws: It is defined in istream and is used to ignore the whitespaces in the string sequence.</li>
<li>ends: It is also defined in ostream and it inserts a null character into the output stream.</li>
<li>flush: It is also defined in ostream and it flushes the output stream.</li>
</ul>
</li>
</ol>
<hr />
<p>Example:</p>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;istream&gt;
#include &lt;sstream&gt;
#include &lt;string&gt;
using namespace std;
int main()
{
    istringstream str(&quot;		 Programmer&quot;);
    string line;
    // Ignore all the whitespace in string
    // str before the first word.
    getline(str &gt;&gt; std::ws, line);
    // you can also write str&gt;&gt;ws
    // After printing the output it will automatically
    // write a new line in the output stream.
    cout &lt;&lt; line &lt;&lt; endl;
    // without flush, the output will be the same.
    cout &lt;&lt; &quot;only a test&quot; &lt;&lt; flush;
    // Use of ends Manipulator
    cout &lt;&lt; &quot;\na&quot;;
    // NULL character will be added in the Output
    cout &lt;&lt; &quot;b&quot; &lt;&lt; ends;
    cout &lt;&lt; &quot;c&quot; &lt;&lt; endl;
    return 0;
}
</code></pre>
<hr />
<ol start="2">
<li>Manipulators with Arguments: Some of the manipulators are used with the argument like <code>setw(20)</code>, <code>setfill(*)</code>, and many more.</li>
</ol>
<ul>
<li>In <code>&lt;iomanip&gt;</code>:
<ul>
<li><code>setw(val)</code>, <code>setfill(c)</code>, <code>setprecision(val)</code>, <code>setbase(val)</code>, <code>setiosflags(flag)</code>, <code>resetiosflags(m)</code></li>
</ul>
</li>
<li>In <code>&lt;ios&gt;</code>:
<ul>
<li><code>showpos</code>, <code>noshowpos</code>, <code>showbase</code>, <code>uppercase</code>, <code>nouppercase</code>, <code>fixed</code>, <code>scientific</code>, <code>hex</code>, <code>dec</code>, <code>oct</code>, <code>left</code>, <code>right</code></li>
</ul>
</li>
</ul>
<p>We will discuss the manipulators in the lecture 15.</p>
<hr />
<h3 id="stream-status--error-handling-more-details-in-lecture-15"><a class="header" href="#stream-status--error-handling-more-details-in-lecture-15">Stream Status &amp; Error Handling (More details in lecture 15)</a></h3>
<p>Ref: <a href="https://en.cppreference.com/w/cpp/io/basic_ios">std::basic_ios</a>, <a href="https://en.cppreference.com/w/cpp/io/ios_base/iostate">std::ios_base::iostate</a></p>
<ul>
<li>4 states: <code>.good()</code>, <code>.eof()</code>, <code>.fail()</code>, <code>.bad()</code>
<ul>
<li><code>.good()</code>: checks if no error has occurred i.e. I/O operations are available.</li>
<li><code>.eof()</code>: checks if end-of-file has been reached.</li>
<li><code>.fail()</code>: checks if an error has occurred.</li>
<li><code>.bad()</code>: checks if a non-recoverable error has occurred.</li>
</ul>
</li>
</ul>
<p>all of them are based on <code>ios_base::iostate</code></p>
<ul>
<li><code>badbit</code>: <code>true</code> if the stream has an irrecoverable stream error</li>
<li><code>eofbit</code>: <code>true</code> if the stream's associated input sequence has reached end-of-file</li>
<li><code>failbit</code>: <code>true</code> if the stream has an input/output operation failed (formatting or extraction error)</li>
</ul>
<hr />
<h4 id="example"><a class="header" href="#example">Example</a></h4>
<p>Ref: <a href="https://en.cppreference.com/w/cpp/io/basic_ios/good"><code>std::basic_ios&lt;CharT,Traits&gt;::good</code></a></p>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;fstream&gt;
#include &lt;cstdlib&gt;
int main()
{
    const char *fname = &quot;test.txt&quot;;
    std::ofstream ofile{fname};
    ofile &lt;&lt; &quot;10 &quot;
          &lt;&lt; &quot;11 &quot;
          &lt;&lt; &quot;12 &quot;
          &lt;&lt; &quot;non-int&quot;;
    ofile.close();

    std::ifstream file{fname};
    if (!file.good())
    {
        std::cout &lt;&lt; &quot;#1. Opening file test.txt failed - &quot;
                     &quot;one of the error flags is true\n&quot;;
        return EXIT_FAILURE;
    }
</code></pre>
<hr />
<pre><code class="language-cpp">    // typical C++ I/O loop uses the return value of the I/O function
    // as the loop controlling condition, operator bool() is used here
    for (int n; file &gt;&gt; n;)
    {
        std::cout &lt;&lt; n &lt;&lt; ' ';
    }
    std::cout &lt;&lt; '\n';

    if (file.bad())
    {
        std::cout &lt;&lt; &quot;#2. I/O error while reading - badbit is true\n&quot;;
        return EXIT_FAILURE;
    }
    else if (file.eof())
    {
        std::cout &lt;&lt; &quot;#3. End of file reached successfully - eofbit is true\n&quot;
                     &quot;This is fine even though file.good() is false\n&quot;;
    }
    else if (file.fail())
    {
        std::cout &lt;&lt; &quot;#4. Non-integer data encountered - failbit is true\n&quot;;
    }
}
</code></pre>
<hr />
<p>Output:</p>
<pre><code>$ ./a.out
10 11 12
#4. Non-integer data encountered - failbit is true
$
</code></pre>
<h2 id="file-io--class"><a class="header" href="#file-io--class">File I/O &amp; <code>class</code></a></h2>
<h3 id="file-io-function-in-a-class"><a class="header" href="#file-io-function-in-a-class">File I/O function in a <code>class</code></a></h3>
<p>If we want to store the data of a class into a file, we can use 2 methods:</p>
<ul>
<li>Text File: <code>&lt;&lt;</code> and <code>&gt;&gt;</code> operators</li>
<li>Binary File: new member functions</li>
</ul>
<hr />
<h3 id="text-file"><a class="header" href="#text-file">Text File</a></h3>
<p>As we know, we can use <code>&lt;&lt;</code> and <code>&gt;&gt;</code> operators to store and retrieve data from a file.
Just like we can use <code>cout</code> and <code>cin</code> to store and retrieve data from the console, we can use <code>ofstream</code> and <code>ifstream</code> to store and retrieve data from a file.</p>
<hr />
<h3 id="binary-file-new-member-functions"><a class="header" href="#binary-file-new-member-functions">Binary File: new member functions</a></h3>
<p>We can add new member functions to the class to store and retrieve binary data from a file.
Two data styles:</p>
<ul>
<li>Read/Write each data member into a file
<ul>
<li>Disscuss in example 2</li>
</ul>
</li>
<li>Read/Write the entire class variable into a file</li>
</ul>
<hr />
<h4 id="readwrite-the-entire-class-variable-into-a-file"><a class="header" href="#readwrite-the-entire-class-variable-into-a-file">Read/Write the entire class variable into a file</a></h4>
<p>Ref: <a href="https://www.geeksforgeeks.org/readwrite-class-objects-fromto-file-c/">Read/Write Class Objects from/to File in C++</a></p>
<p><strong>Theory</strong>:
The data transfer is usually done using <code>&gt;&gt;</code> and <code>&lt;&lt;</code> operators.
But if you have a class with 4 data members and want to write all 4 data members from its object directly to a file or vice-versa, we can do that using following syntax:</p>
<p>To write object's data members in a file:</p>
<pre><code class="language-cpp">// Here file_obj is an object of ofstream
file_obj.write((char *) &amp; class_obj, sizeof(class_obj));
</code></pre>
<p>To read file's data members into an object:</p>
<pre><code class="language-cpp">// Here file_obj is an object of ifstream
file_obj.read((char *) &amp; class_obj, sizeof(class_obj));
</code></pre>
<hr />
<p>Example:</p>
<pre><code class="language-cpp">// C++ program to demonstrate read/write of class
// objects in C++.
#include &lt;iostream&gt;
#include &lt;fstream&gt;
using namespace std;

// Class to define the properties
class Contestant
{
public:
    // Instance variables
    string Name;
    int Age, Ratings;

    // Function declaration of input() to input info
    int input();

    // Function declaration of output_highest_rated() to
    // extract info from file Data Base
    int output_highest_rated();
};
</code></pre>
<hr />
<pre><code class="language-cpp">// Function definition of input() to input info
int Contestant::input()
{
    // Object to write in file
    ofstream file_obj;

    // Opening file in append mode
    file_obj.open(&quot;Input.txt&quot;, ios::app);

    // Object of class contestant to input data in file
    Contestant obj;

    // Feeding appropriate data in variables
    string str = &quot;Michael&quot;;
    int age = 18, ratings = 2500;

    // Assigning data into object
    obj.Name = str;
    obj.Age = age;
    obj.Ratings = ratings;

    // Writing the object's data in file
    file_obj.write((char *)&amp;obj, sizeof(obj));

    // Feeding appropriate data in variables
    str = &quot;Terry&quot;;
    age = 21;
    ratings = 3200;

    // Assigning data into object
    obj.Name = str;
    obj.Age = age;
    obj.Ratings = ratings;

    // Writing the object's data in file
    file_obj.write((char *)&amp;obj, sizeof(obj));

    return 0;
}
</code></pre>
<hr />
<pre><code class="language-cpp">// Function definition of output_highest_rated() to
// extract info from file Data Base
int Contestant::output_highest_rated()
{
    // Object to read from file
    ifstream file_obj;

    // Opening file in input mode
    file_obj.open(&quot;Input.txt&quot;, ios::in);

    // Object of class contestant to input data in file
    Contestant obj;

    // Reading from file into object &quot;obj&quot;
    file_obj.read((char *)&amp;obj, sizeof(obj));

    // max to store maximum ratings
    int max = 0;

    // Highest_rated stores the name of highest rated contestant
    string Highest_rated;

    // Checking till we have the feed
    while (!file_obj.eof())
    {
        // Assigning max ratings
        if (obj.Ratings &gt; max)
        {
            max = obj.Ratings;
            Highest_rated = obj.Name;
        }

        // Checking further
        file_obj.read((char *)&amp;obj, sizeof(obj));
    }

    // Output is the highest rated contestant
    cout &lt;&lt; Highest_rated;
    return 0;
}
</code></pre>
<hr />
<pre><code class="language-cpp">// Driver code
int main()
{
    // Creating object of the class
    Contestant object;

    // Inputting the data
    object.input();

    // Extracting the max rated contestant
    object.output_highest_rated();

    return 0;
}
</code></pre>
<h2 id="file-io-for-structured-data"><a class="header" href="#file-io-for-structured-data">File I/O for Structured Data</a></h2>
<p>Guideline for Structured Data's File I/O:</p>
<ul>
<li>Class or Function?
<ul>
<li>Depending on the data structure, we can either use a class or a function to read/write the data.</li>
<li>If the data structure is a class, we can use the class's member functions to read/write the data.</li>
<li>Otherwise, we can use a function to read/write the data.</li>
</ul>
</li>
<li>Text or Binary File?
<ul>
<li>Binary file is used for efficient data transfer, but it is not human readable/editable.</li>
<li>Text file is human readable/editable, but it is not efficient for large data transfer.</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>Sequential or Random Access?
<ul>
<li>Sequential access does not require large memory to store the data. Usually used for data parsing and processing.</li>
<li>Random access requires large memory to store the data. Usually used for data storage, data retrieval, and data editing.</li>
<li>Random access is faster than sequential access, especially for binary file.</li>
</ul>
</li>
</ul>
<h2 id="example-1-point--triangle-in-text-file-class-ver-a-hreflecture14_ex1htmlsourcea"><a class="header" href="#example-1-point--triangle-in-text-file-class-ver-a-hreflecture14_ex1htmlsourcea">Example 1: Point &amp; Triangle in Text File (class ver.) [<a href="./lecture14_ex1.html">Source</a>]</a></h2>
<h2 id="example-2-vector--matrix-in-binary-file-class-ver-a-hreflecture14_ex2htmlsourcea"><a class="header" href="#example-2-vector--matrix-in-binary-file-class-ver-a-hreflecture14_ex2htmlsourcea">Example 2: Vector &amp; Matrix in Binary File (class ver.) [<a href="./lecture14_ex2.html">Source</a>]</a></h2>
<h2 id="lab-14-a-hreflablab14-1htmlfile-export-of-complex-numbers-geometrya"><a class="header" href="#lab-14-a-hreflablab14-1htmlfile-export-of-complex-numbers-geometrya">Lab 14: <a href="./lab/lab14-1.html">File Export of Complex Number's Geometry</a></a></h2>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../file/lecture13_ex3.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../file/lecture14_ex1.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../file/lecture13_ex3.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../file/lecture14_ex1.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
